(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8911:function(e,t,s){Promise.resolve().then(s.bind(s,7321))},7321:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var n=s(3827),a=s(4090);let l=(0,a.createContext)({settings:{apiURL:""},setSettings:()=>{}}),i=()=>(0,a.useContext)(l),r=e=>{let{children:t}=e,[s,i]=(0,a.useState)({apiURL:""});return(0,n.jsx)(l.Provider,{value:{settings:s,setSettings:i},children:t})};var o=s(8016),c=s(7908);let d=e=>c.Z.get(e).then(e=>e.data);var m=function(){let{settings:e}=i(),{data:t,error:s}=(0,o.ZP)("".concat(e.apiURL,"/media"),d);if(s)return(0,n.jsxs)("div",{children:["加载失败",e.apiURL]});if(!t)return(0,n.jsx)("div",{children:"加载中..."});console.log(s);let a=async t=>{try{await c.Z.post("".concat(e.apiURL).concat(t))}catch(e){console.error("Error sending media control request:",e)}};return(0,n.jsxs)("div",{className:"space-x-5",children:[(0,n.jsx)("button",{onClick:()=>a("/media/previous"),className:"text-5xl",children:"⏪"}),(0,n.jsx)("button",{onClick:()=>{a("/media/play-pause")},className:"text-5xl",children:"⏯️"}),(0,n.jsx)("button",{onClick:()=>a("/media/next"),className:"text-5xl",children:"⏩"})]})};async function u(e,t){try{let s=await c.Z.post("".concat(e,"/volume"),{volume:t});console.log(s.data)}catch(e){console.error("Error updating volume:",e)}}let x=e=>c.Z.get(e).then(e=>e.data);function h(){let{settings:e}=i(),{data:t,error:s}=(0,o.ZP)("".concat(e.apiURL,"/volume"),x),[l,r]=(0,a.useState)(0);return((0,a.useEffect)(()=>{t&&void 0!==t.volume&&r(t.volume)},[t]),s)?(0,n.jsx)("div",{children:"failed to load"}):t?(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("input",{className:"w-full accent-red-500 rounded-lg",type:"range",min:"0",max:"100",value:l,onChange:t=>{let s=t.target.value;r(s),u(e.apiURL,s).catch(console.error)}}),(0,n.jsxs)("p",{className:"text-center text-2xl",children:["VOLUME: ",l]})]}):(0,n.jsx)("div",{children:"loading..."})}var f=e=>{let{isOpen:t,setIsOpen:s}=e,[l,r]=(0,a.useState)(""),[o,c]=(0,a.useState)(""),{setSettings:d}=i();return(0,n.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto ".concat(!t&&"hidden"),children:(0,n.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,n.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,n.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,n.jsx)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:(0,n.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,n.jsx)("div",{className:"sm:flex sm:items-start",children:(0,n.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,n.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:"设置后端服务"}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d({apiURL:"https://".concat(l,":").concat(o)}),s(!1)},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"backendIP",className:"block text-sm font-medium text-gray-700",children:"IP地址:"}),(0,n.jsx)("input",{type:"text",id:"backendIP",value:l,onChange:e=>r(e.target.value),className:"mt-1 p-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 block w-full",placeholder:"例如: 192.168.1.1",required:!0})]}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("label",{htmlFor:"backendPort",className:"block text-sm font-medium text-gray-700",children:"端口:"}),(0,n.jsx)("input",{type:"text",id:"backendPort",value:o,onChange:e=>c(e.target.value),className:"mt-1 p-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 block w-full",placeholder:"例如: 8000",required:!0})]}),(0,n.jsx)("div",{className:"mt-5 sm:mt-6",children:(0,n.jsx)("button",{type:"submit",className:"inline-flex justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:text-sm",children:"保存"})})]})})]})})})})]})})};function p(){let[e,t]=(0,a.useState)(!1);return(0,n.jsx)(r,{children:(0,n.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-around p-10",children:[(0,n.jsx)(m,{}),(0,n.jsx)(h,{}),(0,n.jsx)("button",{onClick:()=>t(!0),className:"mt-4 px-4 py-2 border rounded border-black text-3xl shadow-md",children:"⚙️Settings"}),(0,n.jsx)(f,{isOpen:e,setIsOpen:t})]})})}}},function(e){e.O(0,[833,971,69,744],function(){return e(e.s=8911)}),_N_E=e.O()}]);